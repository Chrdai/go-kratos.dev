(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7503],{3905:function(e,t,r){"use strict";r.d(t,{Zo:function(){return s},kt:function(){return d}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},s=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),g=c(r),d=o,m=g["".concat(l,".").concat(d)]||g[d]||u[d]||a;return r?n.createElement(m,i(i({ref:t},s),{},{components:r})):n.createElement(m,i({ref:t},s))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=g;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:o,i[1]=p;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}g.displayName="MDXCreateElement"},7574:function(e,t,r){"use strict";r.r(t),r.d(t,{frontMatter:function(){return i},contentTitle:function(){return p},metadata:function(){return l},toc:function(){return c},default:function(){return u}});var n=r(2122),o=r(9756),a=(r(7294),r(3905)),i={id:"openapi",title:"OpenAPI Swagger",description:"OpenAPI Swagger",keywords:["Go","Kratos","Toolkit","Framework","Microservices","Protobuf","gRPC","HTTP"]},p=void 0,l={unversionedId:"guide/openapi",id:"guide/openapi",isDocsHomePage:!1,title:"OpenAPI Swagger",description:"OpenAPI Swagger",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/guide/openapi.md",sourceDirName:"guide",slug:"/guide/openapi",permalink:"/en/docs/guide/openapi",editUrl:"https://github.com/go-kratos/go-kratos.dev/edit/main/i18n/en/docusaurus-plugin-content-docs/current/guide/openapi.md",version:"current",frontMatter:{id:"openapi",title:"OpenAPI Swagger",description:"OpenAPI Swagger",keywords:["Go","Kratos","Toolkit","Framework","Microservices","Protobuf","gRPC","HTTP"]},sidebar:"docs",previous:{title:"Protobuf Guideline",permalink:"/en/docs/guide/api-protobuf"},next:{title:"Dependency Injection",permalink:"/en/docs/guide/wire"}},c=[{value:"\u65b9\u5f0f1: \u4f7f\u7528\u63d2\u4ef6\u63d0\u4f9bswagger\u63a5\u53e3",id:"\u65b9\u5f0f1-\u4f7f\u7528\u63d2\u4ef6\u63d0\u4f9bswagger\u63a5\u53e3",children:[]},{value:"\u65b9\u5f0f2: \u4f7f\u7528protoc\u63d2\u4ef6\u751f\u6210swagger.json\u6587\u4ef6",id:"\u65b9\u5f0f2-\u4f7f\u7528protoc\u63d2\u4ef6\u751f\u6210swaggerjson\u6587\u4ef6",children:[]}],s={toc:c};function u(e){var t=e.components,r=(0,o.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,n.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u6846\u67b6\u53ef\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u63d0\u4f9bOpenAPI/Swagger\u7684\u4f7f\u7528\uff1a1. \u5728\u670d\u52a1\u4e0a\u63d0\u4f9bswagger\u63a5\u53e3\uff0c2. \u4f7f\u7528protoc\u63d2\u4ef6\u751f\u6210swagger.json\u6587\u4ef6\u3002\u4e0b\u9762\u4ecb\u7ecd\u8fd9\u4e24\u79cd\u65b9\u5f0f\u3002"),(0,a.kt)("h3",{id:"\u65b9\u5f0f1-\u4f7f\u7528\u63d2\u4ef6\u63d0\u4f9bswagger\u63a5\u53e3"},"\u65b9\u5f0f1: \u4f7f\u7528\u63d2\u4ef6\u63d0\u4f9bswagger\u63a5\u53e3"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/go-kratos/swagger-api"},"swagger-api"),"\u63d2\u4ef6\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217swagger\u76f8\u5173\u7684API\uff0c\u4ee5\u53ca\u76f8\u5e94\u7684UI\u754c\u9762"),(0,a.kt)("h4",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,a.kt)("p",null,"\u9996\u5148\u5b89\u88c5\u63d2\u4ef6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"go get -u github.com/go-kratos/swagger-api\n")),(0,a.kt)("p",null,"\u7136\u540e\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"internal/server/http.go"),"\u7684NewHTTPServer\u4e2d\u8fdb\u884c\u521d\u59cb\u5316\u548c\u6ce8\u518c\uff0c\u8bf7\u5c3d\u91cf\u5c06\u8fd9\u4e2a\u8def\u7531\u6ce8\u518c\u653e\u5728\u6700\u524d\u9762\uff0c\u4ee5\u514d\u5339\u914d\u4e0d\u5230\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'import  "github.com/go-kratos/swagger-api/openapiv2"\n\nopenAPIhandler := openapiv2.NewHandler()\nsrv.HandlePrefix("/q/", openAPIhandler)\n')),(0,a.kt)("h4",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,a.kt)("p",null,"Open ",(0,a.kt)("inlineCode",{parentName:"p"},"/q/swagger-ui/")," in Web Browser in order to access Swagger UI"),(0,a.kt)("h3",{id:"\u65b9\u5f0f2-\u4f7f\u7528protoc\u63d2\u4ef6\u751f\u6210swaggerjson\u6587\u4ef6"},"\u65b9\u5f0f2: \u4f7f\u7528protoc\u63d2\u4ef6\u751f\u6210swagger.json\u6587\u4ef6"),(0,a.kt)("p",null,"\u65b0\u5efa\u9879\u76eeMakefile\u4e2d\u5df2\u7ecf\u9ed8\u8ba4\u96c6\u6210\u4e86\u751f\u6210swagger.json\u7684\u76f8\u5173\u547d\u4ee4\uff0c\u8fd9\u91cc\u4e5f\u4ecb\u7ecd\u4e0b\u5177\u4f53\u7684\u4f7f\u7528\u65b9\u5f0f"),(0,a.kt)("h4",{id:"installation"},"Installation"),(0,a.kt)("p",null,"First, install the protoc plug-in"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"go get -u github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-openapiv2\n")),(0,a.kt)("h4",{id:"generation"},"Generation"),(0,a.kt)("p",null,"(Recommended) run the following command at the root of the project for generation:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"make swagger\n")),(0,a.kt)("p",null,"Or use the protoc command directly at the root of the project, note that modifying the final proto file path of the command is the actual path"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"protoc --proto_path=. \\\n        --proto_path=./third_party \\\n        --openapiv2_out . \\\n        --openapiv2_opt logtostderr=true \\\n        --openapiv2_opt json_names_for_fields=false \\\n        api/helloworld/v1/greeter.proto\n")),(0,a.kt)("h4",{id:"usage"},"Usage"),(0,a.kt)("p",null,"Once the above command has been executed successfully, the corresponding swagger.json file will be generated in the directory where your proto file is located.\nYou can import it into any platform that supports the Open API specification for browsing, such as:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/swagger-api/swagger-ui"},"Swagger UI")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://editor.swagger.io/"},"Swagger Editor")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/Redocly/redoc"},"ReDoc")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/YMFE/yapi"},"YApi")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://www.postman.com/"},"Postman"))))}u.isMDXComponent=!0}}]);